{"version":3,"file":"index.esm.js","sources":["../src/utils.js","../src/polyfill.js","../src/env.js","../src/interceptor/chain.js","../src/interceptor/index.js","../src/interceptor/interceptors.js","../src/tools.js","../src/index.js"],"sourcesContent":["export function isFunction (x) {\n  return typeof x === 'function'\n}\n\nexport function isUndefined (x) {\n  return typeof x === 'undefined'\n}\n\nexport function isObject (x) {\n  return x && typeof x === 'object'\n}\n","import { isFunction, isObject, isUndefined } from './utils'\n\nconst isBadObj = (x) => !isObject(x)\n\nfunction throwTypeError (s) {\n  throw new TypeError(s)\n}\n\nif (!isFunction(Object.assign)) {\n  // Must be writable: true, enumerable: false, configurable: true\n  Object.assign = function (target) { // .length of function is 2\n    if (target == null) { // TypeError if undefined or null\n      throwTypeError('Cannot convert undefined or null to object')\n    }\n\n    const to = Object(target)\n\n    for (let index = 1; index < arguments.length; index++) {\n      const nextSource = arguments[index]\n\n      if (nextSource != null) { // Skip over if undefined or null\n        for (const nextKey in nextSource) {\n          // Avoid bugs when hasOwnProperty is shadowed\n          if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n            to[nextKey] = nextSource[nextKey]\n          }\n        }\n      }\n    }\n    return to\n  }\n}\n\nif (!isFunction(Object.defineProperties)) {\n  Object.defineProperties = function (obj, properties) {\n    function convertToDescriptor (desc) {\n      function hasProperty (obj, prop) {\n        return Object.prototype.hasOwnProperty.call(obj, prop)\n      }\n\n      if (isBadObj(desc)) { throwTypeError('bad desc') }\n\n      const d = {}\n\n      if (hasProperty(desc, 'enumerable')) d.enumerable = !!desc.enumerable\n      if (hasProperty(desc, 'configurable')) { d.configurable = !!desc.configurable }\n      if (hasProperty(desc, 'value')) d.value = desc.value\n      if (hasProperty(desc, 'writable')) d.writable = !!desc.writable\n      if (hasProperty(desc, 'get')) {\n        const g = desc.get\n\n        if (!isFunction(g) && !isUndefined(g)) { throwTypeError('bad get') }\n        d.get = g\n      }\n      if (hasProperty(desc, 'set')) {\n        const s = desc.set\n        if (!isFunction(s) && !isUndefined(s)) { throwTypeError('bad set') }\n        d.set = s\n      }\n\n      if (('get' in d || 'set' in d) && ('value' in d || 'writable' in d)) { throwTypeError('identity-confused descriptor') }\n\n      return d\n    }\n\n    if (isBadObj(obj)) throwTypeError('bad obj')\n\n    properties = Object(properties)\n\n    const keys = Object.keys(properties)\n    const descs = []\n\n    for (let i = 0; i < keys.length; i++) {\n      descs.push([keys[i], convertToDescriptor(properties[keys[i]])])\n    }\n\n    for (let i = 0; i < descs.length; i++) {\n      Object.defineProperty(obj, descs[i][0], descs[i][1])\n    }\n\n    return obj\n  }\n}\n","import { isWebPlatform } from '@tarojs/shared'\n\nexport const ENV_TYPE = {\n  WEAPP: 'WEAPP',\n  SWAN: 'SWAN',\n  ALIPAY: 'ALIPAY',\n  TT: 'TT',\n  QQ: 'QQ',\n  JD: 'JD',\n  WEB: 'WEB',\n  RN: 'RN',\n  HARMONY: 'HARMONY',\n  QUICKAPP: 'QUICKAPP'\n}\n\nconst isWeb = isWebPlatform()\n\nexport function getEnv () {\n  if (process.env.TARO_ENV === 'weapp') {\n    return ENV_TYPE.WEAPP\n  } else if (process.env.TARO_ENV === 'alipay') {\n    return ENV_TYPE.ALIPAY\n  } else if (process.env.TARO_ENV === 'swan') {\n    return ENV_TYPE.SWAN\n  } else if (process.env.TARO_ENV === 'tt') {\n    return ENV_TYPE.TT\n  } else if (process.env.TARO_ENV === 'jd') {\n    return ENV_TYPE.JD\n  } else if (process.env.TARO_ENV === 'qq') {\n    return ENV_TYPE.QQ\n  } else if (isWeb) {\n    return ENV_TYPE.WEB\n  } else if (process.env.TARO_ENV === 'rn') {\n    return ENV_TYPE.RN\n  } else if (process.env.TARO_ENV === 'harmony') {\n    return ENV_TYPE.HARMONY\n  } else if (process.env.TARO_ENV === 'quickapp') {\n    return ENV_TYPE.QUICKAPP\n  } else {\n    return process.env.TARO_ENV || 'Unknown'\n  }\n}\n","import { isFunction } from '../utils'\n\nexport default class Chain {\n  constructor (requestParams, interceptors, index) {\n    this.index = index || 0\n    this.requestParams = requestParams\n    this.interceptors = interceptors || []\n  }\n\n  proceed (requestParams) {\n    this.requestParams = requestParams\n    if (this.index >= this.interceptors.length) {\n      throw new Error('chain 参数错误, 请勿直接修改 request.chain')\n    }\n    const nextInterceptor = this._getNextInterceptor()\n    const nextChain = this._getNextChain()\n    const p = nextInterceptor(nextChain)\n    const res = p.catch(err => Promise.reject(err))\n    Object.keys(p).forEach(k => isFunction(p[k]) && (res[k] = p[k]))\n    return res\n  }\n\n  _getNextInterceptor () {\n    return this.interceptors[this.index]\n  }\n\n  _getNextChain () {\n    return new Chain(this.requestParams, this.interceptors, this.index + 1)\n  }\n}\n","import Chain from './chain'\n\nexport default class Link {\n  constructor (interceptor) {\n    this.taroInterceptor = interceptor\n    this.chain = new Chain()\n  }\n\n  request (requestParams) {\n    const chain = this.chain\n    const taroInterceptor = this.taroInterceptor\n\n    chain.interceptors = chain.interceptors\n      .filter(interceptor => interceptor !== taroInterceptor)\n      .concat(taroInterceptor)\n\n    return chain.proceed({ ...requestParams })\n  }\n\n  addInterceptor (interceptor) {\n    this.chain.interceptors.push(interceptor)\n  }\n\n  cleanInterceptors () {\n    this.chain = new Chain()\n  }\n}\n\nexport function interceptorify (promiseifyApi) {\n  return new Link(function (chain) {\n    return promiseifyApi(chain.requestParams)\n  })\n}\n","import { isFunction, isUndefined } from '../utils'\n\nexport function timeoutInterceptor (chain) {\n  const requestParams = chain.requestParams\n  let p\n  const res = new Promise((resolve, reject) => {\n    let timeout = setTimeout(() => {\n      timeout = null\n      reject(new Error('网络链接超时,请稍后再试！'))\n    }, (requestParams && requestParams.timeout) || 60000)\n\n    p = chain.proceed(requestParams)\n    p\n      .then(res => {\n        if (!timeout) return\n        clearTimeout(timeout)\n        resolve(res)\n      })\n      .catch(err => {\n        timeout && clearTimeout(timeout)\n        reject(err)\n      })\n  })\n  if (!isUndefined(p) && isFunction(p.abort)) res.abort = p.abort\n\n  return res\n}\n\nexport function logInterceptor (chain) {\n  const requestParams = chain.requestParams\n  const { method, data, url } = requestParams\n\n  // eslint-disable-next-line no-console\n  console.log(`http ${method || 'GET'} --> ${url} data: `, data)\n\n  const p = chain.proceed(requestParams)\n  const res = p\n    .then(res => {\n      // eslint-disable-next-line no-console\n      console.log(`http <-- ${url} result:`, res)\n      return res\n    })\n  if (isFunction(p.abort)) res.abort = p.abort\n\n  return res\n}\n","import { isFunction, isObject } from './utils'\n\nexport function Behavior (options) {\n  return options\n}\n\nexport function getPreload (current) {\n  return function (key, val) {\n    current.preloadData = isObject(key)\n      ? key\n      : {\n        [key]: val\n      }\n  }\n}\n\nconst defaultDesignWidth = 750\nconst defaultDesignRatio = {\n  640: 2.34 / 2,\n  750: 1,\n  828: 1.81 / 2\n}\nconst defaultBaseFontSize = 20\nconst defaultUnitPrecision = 5\nconst defaultTargetUnit = 'rpx'\n\nexport function getInitPxTransform (taro) {\n  return function (config) {\n    const {\n      designWidth = defaultDesignWidth,\n      deviceRatio = defaultDesignRatio,\n      baseFontSize = defaultBaseFontSize,\n      targetUnit = defaultTargetUnit,\n      unitPrecision = defaultUnitPrecision,\n    } = config\n    taro.config = taro.config || {}\n    taro.config.designWidth = designWidth\n    taro.config.deviceRatio = deviceRatio\n    taro.config.baseFontSize = baseFontSize\n    taro.config.targetUnit = targetUnit\n    taro.config.unitPrecision = unitPrecision\n  }\n}\n\nexport function getPxTransform (taro) {\n  return function (size) {\n    const config = taro.config || {}\n    const deviceRatio = config.deviceRatio || defaultDesignRatio\n    const baseFontSize = config.baseFontSize\n    const designWidth = (((input = 0) => isFunction(config.designWidth)\n      ? config.designWidth(input)\n      : config.designWidth || defaultDesignWidth))(size)\n    if (!(designWidth in deviceRatio)) {\n      throw new Error(`deviceRatio 配置中不存在 ${designWidth} 的设置！`)\n    }\n    const formatSize = ~~size\n    let rootValue = 1 / config.deviceRatio[designWidth]\n    switch (config.targetUnit) {\n      case 'rem':\n        rootValue *= baseFontSize * 2\n        break\n      case 'px':\n        rootValue *= 2\n        break\n    }\n    let val = formatSize / rootValue\n    if (config.unitPrecision >= 0 && config.unitPrecision <= 100) {\n      val = Number(val.toFixed(config.unitPrecision))\n    }\n    return val + config.targetUnit\n  }\n}\n","/* eslint-disable camelcase */\nimport './polyfill'\n\nimport {\n  Current,\n  eventCenter,\n  Events,\n  getCurrentInstance,\n  nextTick,\n  options\n} from '@tarojs/runtime'\n\nimport { ENV_TYPE, getEnv } from './env'\nimport Link, { interceptorify } from './interceptor'\nimport * as interceptors from './interceptor/interceptors'\nimport {\n  Behavior,\n  getInitPxTransform,\n  getPreload,\n  getPxTransform,\n} from './tools'\n\nconst Taro = {\n  Behavior,\n  getEnv,\n  ENV_TYPE,\n  Link,\n  interceptors,\n  Current,\n  getCurrentInstance,\n  options,\n  nextTick,\n  eventCenter,\n  Events,\n  getInitPxTransform,\n  interceptorify\n}\n\nTaro.initPxTransform = getInitPxTransform(Taro)\nTaro.preload = getPreload(Current)\nTaro.pxTransform = getPxTransform(Taro)\n\nexport default Taro\n"],"names":["isFunction","x","isUndefined","isObject","_typeof","isBadObj","throwTypeError","s","TypeError","Object","assign","target","to","index","arguments","length","nextSource","nextKey","prototype","hasOwnProperty","call","defineProperties","obj","properties","convertToDescriptor","desc","hasProperty","prop","d","enumerable","configurable","value","writable","g","get","set","keys","descs","i","push","defineProperty","ENV_TYPE","WEAPP","SWAN","ALIPAY","TT","QQ","JD","WEB","RN","HARMONY","QUICKAPP","isWeb","isWebPlatform","getEnv","process","env","TARO_ENV","Chain","requestParams","interceptors","_classCallCheck","_createClass","key","proceed","Error","nextInterceptor","_getNextInterceptor","nextChain","_getNextChain","p","res","catch","err","Promise","reject","forEach","k","Link","interceptor","taroInterceptor","chain","request","filter","concat","_objectSpread","addInterceptor","cleanInterceptors","interceptorify","promiseifyApi","timeoutInterceptor","resolve","timeout","setTimeout","then","clearTimeout","abort","logInterceptor","method","data","url","console","log","Behavior","options","getPreload","current","val","preloadData","_defineProperty","defaultDesignWidth","defaultDesignRatio","defaultBaseFontSize","defaultUnitPrecision","defaultTargetUnit","getInitPxTransform","taro","config","_config$designWidth","designWidth","_config$deviceRatio","deviceRatio","_config$baseFontSize","baseFontSize","_config$targetUnit","targetUnit","_config$unitPrecision","unitPrecision","getPxTransform","size","input","undefined","formatSize","rootValue","Number","toFixed","Taro","Current","getCurrentInstance","nextTick","eventCenter","Events","initPxTransform","preload","pxTransform"],"mappings":"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"}