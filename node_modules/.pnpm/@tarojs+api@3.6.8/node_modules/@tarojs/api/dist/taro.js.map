{"version":3,"file":"taro.js","sources":["../src/utils.js","../src/polyfill.js","../src/env.js","../src/interceptor/chain.js","../src/interceptor/index.js","../src/interceptor/interceptors.js","../src/tools.js","../src/index.js"],"sourcesContent":["export function isFunction (x) {\n  return typeof x === 'function'\n}\n\nexport function isUndefined (x) {\n  return typeof x === 'undefined'\n}\n\nexport function isObject (x) {\n  return x && typeof x === 'object'\n}\n","import { isFunction, isObject, isUndefined } from './utils'\n\nconst isBadObj = (x) => !isObject(x)\n\nfunction throwTypeError (s) {\n  throw new TypeError(s)\n}\n\nif (!isFunction(Object.assign)) {\n  // Must be writable: true, enumerable: false, configurable: true\n  Object.assign = function (target) { // .length of function is 2\n    if (target == null) { // TypeError if undefined or null\n      throwTypeError('Cannot convert undefined or null to object')\n    }\n\n    const to = Object(target)\n\n    for (let index = 1; index < arguments.length; index++) {\n      const nextSource = arguments[index]\n\n      if (nextSource != null) { // Skip over if undefined or null\n        for (const nextKey in nextSource) {\n          // Avoid bugs when hasOwnProperty is shadowed\n          if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n            to[nextKey] = nextSource[nextKey]\n          }\n        }\n      }\n    }\n    return to\n  }\n}\n\nif (!isFunction(Object.defineProperties)) {\n  Object.defineProperties = function (obj, properties) {\n    function convertToDescriptor (desc) {\n      function hasProperty (obj, prop) {\n        return Object.prototype.hasOwnProperty.call(obj, prop)\n      }\n\n      if (isBadObj(desc)) { throwTypeError('bad desc') }\n\n      const d = {}\n\n      if (hasProperty(desc, 'enumerable')) d.enumerable = !!desc.enumerable\n      if (hasProperty(desc, 'configurable')) { d.configurable = !!desc.configurable }\n      if (hasProperty(desc, 'value')) d.value = desc.value\n      if (hasProperty(desc, 'writable')) d.writable = !!desc.writable\n      if (hasProperty(desc, 'get')) {\n        const g = desc.get\n\n        if (!isFunction(g) && !isUndefined(g)) { throwTypeError('bad get') }\n        d.get = g\n      }\n      if (hasProperty(desc, 'set')) {\n        const s = desc.set\n        if (!isFunction(s) && !isUndefined(s)) { throwTypeError('bad set') }\n        d.set = s\n      }\n\n      if (('get' in d || 'set' in d) && ('value' in d || 'writable' in d)) { throwTypeError('identity-confused descriptor') }\n\n      return d\n    }\n\n    if (isBadObj(obj)) throwTypeError('bad obj')\n\n    properties = Object(properties)\n\n    const keys = Object.keys(properties)\n    const descs = []\n\n    for (let i = 0; i < keys.length; i++) {\n      descs.push([keys[i], convertToDescriptor(properties[keys[i]])])\n    }\n\n    for (let i = 0; i < descs.length; i++) {\n      Object.defineProperty(obj, descs[i][0], descs[i][1])\n    }\n\n    return obj\n  }\n}\n","import { isWebPlatform } from '@tarojs/shared'\n\nexport const ENV_TYPE = {\n  WEAPP: 'WEAPP',\n  SWAN: 'SWAN',\n  ALIPAY: 'ALIPAY',\n  TT: 'TT',\n  QQ: 'QQ',\n  JD: 'JD',\n  WEB: 'WEB',\n  RN: 'RN',\n  HARMONY: 'HARMONY',\n  QUICKAPP: 'QUICKAPP'\n}\n\nconst isWeb = isWebPlatform()\n\nexport function getEnv () {\n  if (process.env.TARO_ENV === 'weapp') {\n    return ENV_TYPE.WEAPP\n  } else if (process.env.TARO_ENV === 'alipay') {\n    return ENV_TYPE.ALIPAY\n  } else if (process.env.TARO_ENV === 'swan') {\n    return ENV_TYPE.SWAN\n  } else if (process.env.TARO_ENV === 'tt') {\n    return ENV_TYPE.TT\n  } else if (process.env.TARO_ENV === 'jd') {\n    return ENV_TYPE.JD\n  } else if (process.env.TARO_ENV === 'qq') {\n    return ENV_TYPE.QQ\n  } else if (isWeb) {\n    return ENV_TYPE.WEB\n  } else if (process.env.TARO_ENV === 'rn') {\n    return ENV_TYPE.RN\n  } else if (process.env.TARO_ENV === 'harmony') {\n    return ENV_TYPE.HARMONY\n  } else if (process.env.TARO_ENV === 'quickapp') {\n    return ENV_TYPE.QUICKAPP\n  } else {\n    return process.env.TARO_ENV || 'Unknown'\n  }\n}\n","import { isFunction } from '../utils'\n\nexport default class Chain {\n  constructor (requestParams, interceptors, index) {\n    this.index = index || 0\n    this.requestParams = requestParams\n    this.interceptors = interceptors || []\n  }\n\n  proceed (requestParams) {\n    this.requestParams = requestParams\n    if (this.index >= this.interceptors.length) {\n      throw new Error('chain 参数错误, 请勿直接修改 request.chain')\n    }\n    const nextInterceptor = this._getNextInterceptor()\n    const nextChain = this._getNextChain()\n    const p = nextInterceptor(nextChain)\n    const res = p.catch(err => Promise.reject(err))\n    Object.keys(p).forEach(k => isFunction(p[k]) && (res[k] = p[k]))\n    return res\n  }\n\n  _getNextInterceptor () {\n    return this.interceptors[this.index]\n  }\n\n  _getNextChain () {\n    return new Chain(this.requestParams, this.interceptors, this.index + 1)\n  }\n}\n","import Chain from './chain'\n\nexport default class Link {\n  constructor (interceptor) {\n    this.taroInterceptor = interceptor\n    this.chain = new Chain()\n  }\n\n  request (requestParams) {\n    const chain = this.chain\n    const taroInterceptor = this.taroInterceptor\n\n    chain.interceptors = chain.interceptors\n      .filter(interceptor => interceptor !== taroInterceptor)\n      .concat(taroInterceptor)\n\n    return chain.proceed({ ...requestParams })\n  }\n\n  addInterceptor (interceptor) {\n    this.chain.interceptors.push(interceptor)\n  }\n\n  cleanInterceptors () {\n    this.chain = new Chain()\n  }\n}\n\nexport function interceptorify (promiseifyApi) {\n  return new Link(function (chain) {\n    return promiseifyApi(chain.requestParams)\n  })\n}\n","import { isFunction, isUndefined } from '../utils'\n\nexport function timeoutInterceptor (chain) {\n  const requestParams = chain.requestParams\n  let p\n  const res = new Promise((resolve, reject) => {\n    let timeout = setTimeout(() => {\n      timeout = null\n      reject(new Error('网络链接超时,请稍后再试！'))\n    }, (requestParams && requestParams.timeout) || 60000)\n\n    p = chain.proceed(requestParams)\n    p\n      .then(res => {\n        if (!timeout) return\n        clearTimeout(timeout)\n        resolve(res)\n      })\n      .catch(err => {\n        timeout && clearTimeout(timeout)\n        reject(err)\n      })\n  })\n  if (!isUndefined(p) && isFunction(p.abort)) res.abort = p.abort\n\n  return res\n}\n\nexport function logInterceptor (chain) {\n  const requestParams = chain.requestParams\n  const { method, data, url } = requestParams\n\n  // eslint-disable-next-line no-console\n  console.log(`http ${method || 'GET'} --> ${url} data: `, data)\n\n  const p = chain.proceed(requestParams)\n  const res = p\n    .then(res => {\n      // eslint-disable-next-line no-console\n      console.log(`http <-- ${url} result:`, res)\n      return res\n    })\n  if (isFunction(p.abort)) res.abort = p.abort\n\n  return res\n}\n","import { isFunction, isObject } from './utils'\n\nexport function Behavior (options) {\n  return options\n}\n\nexport function getPreload (current) {\n  return function (key, val) {\n    current.preloadData = isObject(key)\n      ? key\n      : {\n        [key]: val\n      }\n  }\n}\n\nconst defaultDesignWidth = 750\nconst defaultDesignRatio = {\n  640: 2.34 / 2,\n  750: 1,\n  828: 1.81 / 2\n}\nconst defaultBaseFontSize = 20\nconst defaultUnitPrecision = 5\nconst defaultTargetUnit = 'rpx'\n\nexport function getInitPxTransform (taro) {\n  return function (config) {\n    const {\n      designWidth = defaultDesignWidth,\n      deviceRatio = defaultDesignRatio,\n      baseFontSize = defaultBaseFontSize,\n      targetUnit = defaultTargetUnit,\n      unitPrecision = defaultUnitPrecision,\n    } = config\n    taro.config = taro.config || {}\n    taro.config.designWidth = designWidth\n    taro.config.deviceRatio = deviceRatio\n    taro.config.baseFontSize = baseFontSize\n    taro.config.targetUnit = targetUnit\n    taro.config.unitPrecision = unitPrecision\n  }\n}\n\nexport function getPxTransform (taro) {\n  return function (size) {\n    const config = taro.config || {}\n    const deviceRatio = config.deviceRatio || defaultDesignRatio\n    const baseFontSize = config.baseFontSize\n    const designWidth = (((input = 0) => isFunction(config.designWidth)\n      ? config.designWidth(input)\n      : config.designWidth || defaultDesignWidth))(size)\n    if (!(designWidth in deviceRatio)) {\n      throw new Error(`deviceRatio 配置中不存在 ${designWidth} 的设置！`)\n    }\n    const formatSize = ~~size\n    let rootValue = 1 / config.deviceRatio[designWidth]\n    switch (config.targetUnit) {\n      case 'rem':\n        rootValue *= baseFontSize * 2\n        break\n      case 'px':\n        rootValue *= 2\n        break\n    }\n    let val = formatSize / rootValue\n    if (config.unitPrecision >= 0 && config.unitPrecision <= 100) {\n      val = Number(val.toFixed(config.unitPrecision))\n    }\n    return val + config.targetUnit\n  }\n}\n","/* eslint-disable camelcase */\nimport './polyfill'\n\nimport {\n  Current,\n  eventCenter,\n  Events,\n  getCurrentInstance,\n  nextTick,\n  options\n} from '@tarojs/runtime'\n\nimport { ENV_TYPE, getEnv } from './env'\nimport Link, { interceptorify } from './interceptor'\nimport * as interceptors from './interceptor/interceptors'\nimport {\n  Behavior,\n  getInitPxTransform,\n  getPreload,\n  getPxTransform,\n} from './tools'\n\nconst Taro = {\n  Behavior,\n  getEnv,\n  ENV_TYPE,\n  Link,\n  interceptors,\n  Current,\n  getCurrentInstance,\n  options,\n  nextTick,\n  eventCenter,\n  Events,\n  getInitPxTransform,\n  interceptorify\n}\n\nTaro.initPxTransform = getInitPxTransform(Taro)\nTaro.preload = getPreload(Current)\nTaro.pxTransform = getPxTransform(Taro)\n\nexport default Taro\n"],"names":["isFunction","x","isUndefined","isObject","_typeof","isBadObj","throwTypeError","s","TypeError","Object","assign","target","to","index","arguments","length","nextSource","nextKey","prototype","hasOwnProperty","call","defineProperties","obj","properties","convertToDescriptor","desc","hasProperty","prop","d","enumerable","configurable","value","writable","g","get","set","keys","descs","i","push","defineProperty","ENV_TYPE","WEAPP","SWAN","ALIPAY","TT","QQ","JD","WEB","RN","HARMONY","QUICKAPP","isWeb","isWebPlatform","getEnv","process","env","TARO_ENV","Chain","requestParams","interceptors","_classCallCheck","_createClass","key","proceed","Error","nextInterceptor","_getNextInterceptor","nextChain","_getNextChain","p","res","catch","err","Promise","reject","forEach","k","Link","interceptor","taroInterceptor","chain","request","filter","concat","_objectSpread","addInterceptor","cleanInterceptors","interceptorify","promiseifyApi","timeoutInterceptor","resolve","timeout","setTimeout","then","clearTimeout","abort","logInterceptor","method","data","url","console","log","Behavior","options","getPreload","current","val","preloadData","_defineProperty","defaultDesignWidth","defaultDesignRatio","defaultBaseFontSize","defaultUnitPrecision","defaultTargetUnit","getInitPxTransform","taro","config","_config$designWidth","designWidth","_config$deviceRatio","deviceRatio","_config$baseFontSize","baseFontSize","_config$targetUnit","targetUnit","_config$unitPrecision","unitPrecision","getPxTransform","size","input","undefined","formatSize","rootValue","Number","toFixed","Taro","Current","getCurrentInstance","nextTick","eventCenter","Events","initPxTransform","preload","pxTransform"],"mappings":"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"}